{"ast":null,"code":"import _defineProperty from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import SignUp from\"./SignUp\";import{TextField,Input,Button}from'@material-ui/core';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(props){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this,props));_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var loginResponse,loginJsonRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return fetch(\"/login\",{method:\"post\",headers:{'Content-Type':'application/json'},body:JSON.stringify({username:_this.state.username,password:_this.state.password})});case 4:loginResponse=_context.sent;_context.next=7;return loginResponse.json();case 7:loginJsonRes=_context.sent;localStorage.setItem('user',loginJsonRes.token);console.log(loginJsonRes.token);if(loginJsonRes.token!=null){console.log(\"login success!\");}else{localStorage.clear();alert('please enter valid user info');}_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log('Error creating new Course!');console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(event){console.log(\"event\");_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleClick=function(event){event.preventDefault();console.log(event.target.id);if(event.target.id==='login-toggle'){console.log('login!');_this.setState({showLogin:true});}else if(event.target.id==='signup-toggle'){console.log('signUp!');_this.setState({showLogin:false});}};_this.state={username:'',password:'',showLogin:true};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;var loginForm=React.createElement(\"div\",null,React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(TextField,{type:\"text\",name:\"username\",placeholder:\"username\",value:this.state.username,onChange:this.handleChange,required:true}),React.createElement(TextField,{type:\"password\",name:\"password\",placeholder:\"password\",value:this.state.password,onChange:this.handleChange,required:true}),React.createElement(Input,{type:\"submit\",placeholder:\"sign up!\"})));var signUpForm=React.createElement(SignUp,null);return React.createElement(\"div\",null,this.state.showLogin?loginForm:signUpForm,React.createElement(Button,{id:\"login-toggle\",onClick:function onClick(){return _this2.setState({showLogin:true});}},\"Login \"),React.createElement(Button,{id:\"signup-toggle\",onClick:function onClick(){return _this2.setState({showLogin:false});}},\"Sign Up\"));}}]);return Login;}(Component);var style={margin:15};export default Login;","map":{"version":3,"sources":["/app/src/main/fun-with-friends/src/components/Login.js"],"names":["React","Component","SignUp","TextField","Input","Button","Login","props","handleSubmit","event","preventDefault","fetch","method","headers","body","JSON","stringify","username","state","password","loginResponse","json","loginJsonRes","localStorage","setItem","token","console","log","clear","alert","handleChange","setState","target","name","value","handleClick","id","showLogin","loginForm","signUpForm","style","margin"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport SignUp from \"./SignUp\";\nimport {TextField, Input, Button} from '@material-ui/core';\n\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            showLogin: true\n        }\n    }\n\n\n    handleSubmit = async (event) => {\n        event.preventDefault();\n        try {\n            const loginResponse = await fetch(`/login`, {\n                method: \"post\",\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    username: this.state.username,\n                    password: this.state.password,\n                })\n            })\n\n            const loginJsonRes = await loginResponse.json();\n            localStorage.setItem('user', loginJsonRes.token);\n            console.log(loginJsonRes.token);\n            if (loginJsonRes.token != null) {\n                console.log(\"login success!\")\n            } else {\n                localStorage.clear();\n                alert('please enter valid user info');\n            }\n\n        } catch (error) {\n            console.log('Error creating new Course!')\n            console.log(error)\n        }\n    }\n\n    handleChange = (event) => {\n        console.log(\"event\");\n        this.setState({[event.target.name]: event.target.value})\n    }\n    handleClick = (event) =>{\n        event.preventDefault();\n        console.log(event.target.id)\n        if(event.target.id==='login-toggle'){\n            console.log('login!')\n            this.setState({showLogin: true});\n        }else if(event.target.id==='signup-toggle'){\n            console.log('signUp!')\n            this.setState({showLogin: false});\n        }\n    }\n\n    render() {\n        const loginForm = (\n            <div>\n                <form onSubmit={this.handleSubmit}>\n                    <TextField\n                        type=\"text\"\n                        name=\"username\"\n                        placeholder=\"username\"\n                        value={this.state.username}\n                        onChange={this.handleChange}\n                        required\n                    />\n\n                    <TextField\n                        type=\"password\"\n                        name=\"password\"\n                        placeholder=\"password\"\n                        value={this.state.password}\n                        onChange={this.handleChange}\n                        required\n                    />\n                    <Input type=\"submit\" placeholder='sign up!'/>\n                </form>\n            </div>\n        );\n        const signUpForm = <SignUp />\n        return (\n            <div>\n            {this.state.showLogin ? loginForm: signUpForm}\n            <Button id='login-toggle' onClick={() => this.setState({showLogin: true})}>Login </Button>\n            <Button id='signup-toggle' onClick={() => this.setState({showLogin: false})}>Sign Up</Button>\n            </div>\n        )\n    }\n}\n\nconst style = {\n    margin: 15,\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}