{"ast":null,"code":"import _regeneratorRuntime from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/app/src/main/fun-with-friends/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import{Button,Input,TextField}from\"@material-ui/core\";var CreateRoom=/*#__PURE__*/function(_Component){_inherits(CreateRoom,_Component);function CreateRoom(props){var _this;_classCallCheck(this,CreateRoom);_this=_possibleConstructorReturn(this,_getPrototypeOf(CreateRoom).call(this,props));_this.getUser=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getUserResponse,getUserJsonRes,username;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/user\",{method:\"get\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"user\")// \"Content-Type\": \"application/json\"\n}});case 3:getUserResponse=_context.sent;_context.next=6;return getUserResponse.json();case 6:getUserJsonRes=_context.sent;username=getUserJsonRes.username;console.log(\"the user is: \"+username);_this.setState({roomAndUsers:_objectSpread({},_this.state.roomAndUsers,{user:username})});_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log('Error creating new Course!');console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var roomResponse,roomJsonRes;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_this.getUser();roomResponse=null;_context2.prev=3;if(!_this.state.isCreateRoom){_context2.next=10;break;}_context2.next=7;return fetch(\"game-room/create\",{method:\"post\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"user\"),'Content-Type':'application/json'},body:JSON.stringify({roomName:_this.state.roomAndUsers.room})});case 7:roomResponse=_context2.sent;_context2.next=13;break;case 10:_context2.next=12;return fetch(\"game-room/join-\".concat(_this.state.roomAndUsers.room),{method:\"post\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"user\"),'Content-Type':'application/json'}});case 12:roomResponse=_context2.sent;case 13:_context2.next=15;return roomResponse.json();case 15:roomJsonRes=_context2.sent;// localStorage.setItem('user', roomJsonRes.token);\nconsole.log(roomJsonRes);// if (roomJsonRes.token != null) {\n//     console.log(\"signup success!\")\n// } else {\n//     localStorage.clear();\n//     alert('please enter valid user info');\n// }\n_context2.next=23;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](3);console.log('Error creating new Course!');console.log(_context2.t0);case 23:_this.props.setUserAndRoom(_this.state.roomAndUsers);case 24:case\"end\":return _context2.stop();}}},_callee2,null,[[3,19]]);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleChange=function(event){console.log(\"event\");_this.setState({roomAndUsers:_objectSpread({},_this.state.roomAndUsers,{room:event.target.value})});// this.setState({[event.target.name]: event.target.value})\n};_this.state={roomAndUsers:{user:'',room:''},isCreateRoom:true};return _this;}_createClass(CreateRoom,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(TextField,{type:\"text\",name:\"room\",placeholder:\"room\",value:this.state.roomAndUsers.room,onChange:this.handleChange,required:true}),React.createElement(Button,{id:\"create-toggle\",type:\"submit\",onClick:function onClick(){return _this2.setState({isCreateRoom:true});}},\"create \"),React.createElement(Button,{id:\"join-toggle\",type:\"submit\",onClick:function onClick(){return _this2.setState({isCreateRoom:false});}},\"join\")));}}]);return CreateRoom;}(Component);export default CreateRoom;","map":{"version":3,"sources":["/app/src/main/fun-with-friends/src/components/CreateRoom.js"],"names":["React","Component","Button","Input","TextField","CreateRoom","props","getUser","fetch","method","headers","Authorization","localStorage","getItem","getUserResponse","json","getUserJsonRes","username","console","log","setState","roomAndUsers","state","user","handleSubmit","event","preventDefault","roomResponse","isCreateRoom","body","JSON","stringify","roomName","room","roomJsonRes","setUserAndRoom","handleChange","target","value"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {Button, Input, TextField} from \"@material-ui/core\";\n\n\nclass CreateRoom extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            roomAndUsers: {\n                user: '',\n                room: ''\n            },\n            isCreateRoom: true\n        }\n    }\n\n    getUser = async () => {\n\n        try {\n            const getUserResponse = await fetch(`/user`, {\n                method: \"get\",\n                headers: {\n                    Authorization: \"Bearer \" + localStorage.getItem(\"user\"),\n                    // \"Content-Type\": \"application/json\"\n                }\n            })\n\n            const getUserJsonRes = await getUserResponse.json();\n            const username = getUserJsonRes.username\n            console.log(\"the user is: \" + username);\n            this.setState({roomAndUsers: {...this.state.roomAndUsers, user: username}});\n        } catch (error) {\n            console.log('Error creating new Course!')\n            console.log(error)\n        }\n    }\n\n    handleSubmit = async (event) => {\n        event.preventDefault();\n        this.getUser();\n        let roomResponse = null;\n        try {\n            if (this.state.isCreateRoom) {\n                roomResponse = await fetch(`game-room/create`, {\n                    method: \"post\",\n                    headers: {\n                        Authorization: \"Bearer \" + localStorage.getItem(\"user\"),\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        roomName: this.state.roomAndUsers.room\n                    })\n                })\n            } else {\n                roomResponse = await fetch(`game-room/join-${this.state.roomAndUsers.room}`, {\n                    method: \"post\",\n                    headers: {\n                        Authorization: \"Bearer \" + localStorage.getItem(\"user\"),\n                        'Content-Type': 'application/json'\n                    }\n                })\n            }\n\n            const roomJsonRes = await roomResponse.json();\n            // localStorage.setItem('user', roomJsonRes.token);\n            console.log(roomJsonRes);\n            // if (roomJsonRes.token != null) {\n            //     console.log(\"signup success!\")\n            // } else {\n            //     localStorage.clear();\n            //     alert('please enter valid user info');\n            // }\n\n        } catch (error) {\n            console.log('Error creating new Course!')\n            console.log(error)\n        }\n        this.props.setUserAndRoom(this.state.roomAndUsers)\n    }\n    handleChange = (event) => {\n        console.log(\"event\");\n        this.setState({roomAndUsers: {...this.state.roomAndUsers, room: event.target.value}});\n        // this.setState({[event.target.name]: event.target.value})\n    }\n\n    render() {\n        return (\n            <div>\n                <form onSubmit={this.handleSubmit}>\n                    <TextField\n                        type=\"text\"\n                        name=\"room\"\n                        placeholder=\"room\"\n                        value={this.state.roomAndUsers.room}\n                        onChange={this.handleChange}\n                        required\n                    />\n\n                    <Button id='create-toggle' type='submit'\n                            onClick={() => this.setState({isCreateRoom: true})}>create </Button>\n                    <Button id='join-toggle' type='submit'\n                            onClick={() => this.setState({isCreateRoom: false})}>join</Button>\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default CreateRoom;"]},"metadata":{},"sourceType":"module"}