(this["webpackJsonpfun-with-friends"]=this["webpackJsonpfun-with-friends"]||[]).push([[0],{249:function(e,t,n){e.exports=n.p+"static/media/background_image.df8f719e.png"},257:function(e,t,n){e.exports=n(564)},262:function(e,t,n){},554:function(e,t){},564:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),s=n.n(o),i=(n(262),n(16)),c=n(12),l=n(21),u=n(22),p=n(23),m=n(141),d=n(50),h=n(11),g=n.n(h),f=n(26),b=n(17),v=n(94),y=n(95),w=n.n(y),O=n(73),j=n.n(O),C=n(96),E=n.n(C),S=n(97),k=n.n(S),x=n(592);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a.Component;var A=n(593),D=n(594);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B,P=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getUser=Object(f.a)(g.a.mark((function e(){var t,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/user",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("user")}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,r=a.username,console.log("the user is: "+r),n.setState({roomAndUsers:N({},n.state.roomAndUsers,{user:r})}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Error creating new Course!"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),n.handleSubmit=function(){var e=Object(f.a)(g.a.mark((function e(t){var a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.getUser(),a=null,e.prev=3,!n.state.isCreateRoom){e.next=10;break}return e.next=7,fetch("game-room/create",{method:"post",headers:{Authorization:"Bearer "+localStorage.getItem("user"),"Content-Type":"application/json"},body:JSON.stringify({roomName:n.state.roomAndUsers.room})});case 7:a=e.sent,e.next=13;break;case 10:return e.next=12,fetch("game-room/join-".concat(n.state.roomAndUsers.room),{method:"post",headers:{Authorization:"Bearer "+localStorage.getItem("user"),"Content-Type":"application/json"}});case 12:a=e.sent;case 13:return e.next=15,a.json();case 15:r=e.sent,console.log(r),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(3),console.log("Error creating new Course!"),console.log(e.t0);case 23:n.props.setUserAndRoom(n.state.roomAndUsers);case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){console.log("event"),n.setState({roomAndUsers:N({},n.state.roomAndUsers,{room:e.target.value})})},n.state={roomAndUsers:{user:"",room:""},isCreateRoom:!0},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(A.a,{type:"text",name:"room",placeholder:"room",value:this.state.roomAndUsers.room,onChange:this.handleChange,required:!0}),r.a.createElement(D.a,{id:"create-toggle",type:"submit",onClick:function(){return e.setState({isCreateRoom:!0})}},"create "),r.a.createElement(D.a,{id:"join-toggle",type:"submit",onClick:function(){return e.setState({isCreateRoom:!1})}},"join")))}}]),t}(a.Component),M=n(100);n(107);function J(){var e=Object(v.a)(["\n  display: grid;\n  color: #FFF;\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n  .value {\n    justify-self: center;\n    font-family: Sans-serif;  \n    font-size: 1.5rem;\n    margin : .5em;\n  }\n  .slider {\n    justify-self: center;\n    -webkit-appearance: none;\n    width: 75%;\n    height: .4em;\n    border-radius: 1em;\n    background: #cdcdcd\n    outline: none;\n    &::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      appearance: none;\n      ","\n    }\n  }\n\n"]);return J=function(){return e},e}var L=M.a.div(J(),(function(e){return function(e){return"\n  width: 1.5em;\n  height: 1.5em;\n  background: ".concat(e.color,";\n  cursor: pointer;\n  -webkit-transition: .2s;\n  transition: opacity .2s;\n")}(e)})),H=(B={height:"100vh",display:"grid",gridTemplateColumns:1},Object(b.a)(B,"gridTemplateColumns","85% 15%"),Object(b.a)(B,"background","#656565"),B),T={gridRowStart:1,gridColumnEnd:2},V={height:"15%",background:"linear-gradient(to right, red, orange, yellow, lime,Turquoise,Cyan, Blue, Violet, Crimson,red)"},z=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sender:"",room:"",showForm:!0,isConnected:!1,colorValue:.7,brushRadius:10},n.setupBeforeUnloadListener=function(){window.addEventListener("beforeunload",(function(e){e.preventDefault();return n.disconnect(e),e.returnValue="you are now leaving","you are now leaving"}))},n.ws=null,n.stompClient=null,n.topic=null,n.currentSubscription=null,n.p=new j.a,n.joinRoom=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/game-room/join-".concat(n.state.room),{method:"post",headers:{Authorization:"Bearer "+localStorage.getItem("user"),"Content-Type":"application/json"}});case 3:e.sent,n.ws=new E.a("/play"),n.stompClient=k.a.over(n.ws),n.stompClient.connect({},n.onConnected),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error joining room!"),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),n.leaveRoom=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/game-room/leave",{method:"post",headers:{Authorization:"Bearer "+localStorage.getItem("user"),"Content-Type":"application/json"}});case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error leaving room!"),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),n.enterRoom=function(){var e=n.state.name;n.topic="/app/game/".concat(n.state.room),n.currentSubscription&&n.currentSubscription.unsubscribe(),n.currentSubscription=n.stompClient.subscribe("/topic/".concat(n.state.room),n.onMessageReceived),n.stompClient.send("".concat(n.topic,"/addUser"),{},JSON.stringify({sender:e,type:"JOIN"})),n.setState({isConnected:!0})},n.onConnected=function(){n.enterRoom()},n.disconnect=function(e){null!==n.stompClient&&(n.leaveRoom(),console.log("left room"),n.currentSubscription=n.stompClient.subscribe("/topic/".concat(n.state.room),n.onMessageReceived),n.stompClient.send("".concat(n.topic,"/addUser"),{},JSON.stringify({sender:n.state.name,type:"LEAVE"})),n.setState({isConnected:!1}),n.stompClient.disconnect({},n.onDisconnected)),e.preventDefault()},n.onDisconnected=function(){n.leaveRoom(),console.log("left room"),n.currentSubscription=n.stompClient.subscribe("/topic/".concat(n.state.room),n.onMessageReceived),n.stompClient.send("".concat(n.topic,"/addUser"),{},JSON.stringify({sender:n.state.name,type:"LEAVE"})),n.setState({isConnected:!1})},n.onMessageReceived=function(e){var t=JSON.parse(e.body);console.log("the sender: "+t.sender),t.sender!==n.state.sender&&"CHAT"===t.type&&n.newDrawing(t),console.log("received: "+t)},n.setUserAndRoom=function(e){console.log("the set data:"+e.user),n.setState({sender:e.user,room:e.room,showForm:!1},(function(){n.state.sender;n.joinRoom()}))},n.canvasWidth=.8365*n.p.windowWidth,n.canvasHeight=n.p.windowHeight,n.setup=function(e,t){n.p.createCanvas(n.canvasWidth,n.canvasHeight).parent(t),n.p.background(51)},n.HUEtoRGB=function(e){var t=Math.abs(6*e-3)-1,n=2-Math.abs(6*e-2),a=2-Math.abs(6*e-4);return[Math.max(0,Math.min(255,255*t)),Math.max(0,Math.min(255,255*n)),Math.max(0,Math.min(255,255*a))]},n.newDrawing=function(e){var t=JSON.parse(e.content);console.log("the sender is: "+n.state.sender),console.log("the data:"+t.mouseX),console.log("the data:"+t.mouseY),console.log("the data r,g,b: "+t.r+" "+t.g+" "+t.b),n.p.noStroke(),n.p.fill(t.r,t.g,t.b),n.p.ellipse(t.mouseX,t.mouseY,t.brushRadius,t.brushRadius)},n.mouseDragged=function(e){console.log("sending: "+n.p.mouseX+","+n.p.mouseY);var t=n.HUEtoRGB(n.state.colorValue),a=t[0],r=t[1],o=t[2],s={sender:n.state.sender,content:JSON.stringify({r:parseInt(a),g:parseInt(r),b:parseInt(o),mouseX:parseInt(n.p.mouseX),mouseY:parseInt(n.p.mouseY),brushRadius:parseInt(n.state.brushRadius)}),type:"CHAT"};n.p.mouseX>=0&&n.p.mouseY>=0&&(console.log("the mouse position X: "+n.p.mouseX+" is less than "+n.canvasWidth),console.log("the mouse position Y: "+n.p.mouseY+" is less than "+n.canvasHeight),n.p.mouseX<n.canvasWidth&&n.p.mouseY<n.canvasHeight&&n.stompClient.send("".concat(n.topic,"/sendMessage"),{},JSON.stringify(s))),n.p.noStroke(),n.p.fill(a,r,o),n.p.ellipse(parseInt(n.p.mouseX),parseInt(n.p.mouseY),parseInt(n.state.brushRadius),parseInt(n.state.brushRadius))},n.handleColorChange=function(e){n.setState({colorValue:e.target.value})},n.handleRadiusChange=function(e){n.setState({brushRadius:e.target.value})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setupBeforeUnloadListener()}},{key:"componentWillUnmount",value:function(){this.setupBeforeUnloadListener()}},{key:"render",value:function(){r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},r.a.createElement(P,{setUserAndRoom:this.setUserAndRoom})),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},r.a.createElement(x.a,null));return r.a.createElement("div",{style:H},r.a.createElement("div",null,r.a.createElement(L,{color:"rgb(".concat(this.HUEtoRGB(this.state.colorValue)[0],",").concat(this.HUEtoRGB(this.state.colorValue)[1],",").concat(this.HUEtoRGB(this.state.colorValue)[2],")")},r.a.createElement("div",{className:"value"},"color slider"),r.a.createElement("input",{style:V,type:"range",min:0,step:.001,max:1,className:"slider col-slider",value:this.state.colorValue,onChange:this.handleColorChange})),r.a.createElement(L,{color:"#333"},r.a.createElement("div",{className:"value"},"brush radius: ",this.state.brushRadius,"px"),r.a.createElement("input",{type:"range",min:1,max:50,className:"slider brush-rad",value:this.state.brushRadius,onChange:this.handleRadiusChange}))),r.a.createElement(w.a,{style:T,setup:this.setup,draw:this.draw,mouseDragged:this.mouseDragged}))}}]),t}(a.Component),X=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(){var e=Object(f.a)(g.a.mark((function e(t){var a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.state.username,email:n.state.email,password:n.state.password})});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,localStorage.setItem("user",r.token),console.log(r),null!=r.token?(console.log("signup success!"),n.props.history.push("/draw-wf")):500==r.response?(localStorage.clear(),alert("there is already a user with that name")):(localStorage.clear(),alert("an unrecognized error has occured, please try again")),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),n.props.history.push("/draw-wf"),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){console.log("event"),n.setState(Object(b.a)({},e.target.name,e.target.value))},n.state={username:"",email:"",password:"",password_confirmation:""},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(A.a,{type:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange,required:!0}),r.a.createElement("br",null),r.a.createElement(A.a,{type:"text",name:"username",placeholder:"username",value:this.state.username,onChange:this.handleChange,required:!0}),r.a.createElement("br",null),r.a.createElement(A.a,{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:this.handleChange,required:!0}),r.a.createElement("br",null),r.a.createElement(A.a,{type:"password",name:"password_confirmation",placeholder:"confirm password",value:this.state.password_confirmation,onChange:this.handleChange,required:!0}),r.a.createElement("br",null),r.a.createElement(D.a,{type:"submit"},"sign up!")))}}]),t}(a.Component),Y=Object(d.f)(X),q=n(249),W={display:"grid",alignContent:"center",justifyContent:"center",height:"100vh",backgroundSize:"contain",backgroundImage:"url(".concat(n.n(q).a,")")},F={margin:0},G={margin:0},_=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(){var e=Object(f.a)(g.a.mark((function e(t){var a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.state.username,password:n.state.password})});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,localStorage.setItem("user",r.token),console.log(r.token),null!=r.token?(console.log("login success!"),n.props.history.push("/draw-wf")):(localStorage.clear(),alert("please enter valid user info")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){console.log("event"),n.setState(Object(b.a)({},e.target.name,e.target.value))},n.handleClick=function(e){e.preventDefault(),console.log(e.target.id),"login-toggle"===e.target.id?n.setState({showLogin:!0}):"signup-toggle"===e.target.id&&n.setState({showLogin:!1})},n.state={username:"",password:"",showLogin:!0},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(A.a,{type:"text",name:"username",placeholder:"username",value:this.state.username,onChange:this.handleChange,required:!0}),r.a.createElement("br",null),r.a.createElement(A.a,{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:this.handleChange,required:!0}),r.a.createElement("br",null),r.a.createElement(D.a,{type:"submit"},"login!"))),n=r.a.createElement(Y,null);return r.a.createElement("div",{style:W,className:"form-style"},r.a.createElement("div",null,r.a.createElement(D.a,{style:F,id:"login-toggle",onClick:function(){return e.setState({showLogin:!0})}},"Login "),r.a.createElement(D.a,{style:F,id:"signup-toggle",onClick:function(){return e.setState({showLogin:!1})}},"Sign Up")),r.a.createElement("div",{style:G},this.state.showLogin?t:n))}}]),t}(a.Component);n(563),a.Component;function $(){var e=Object(v.a)(["\n  display: flex;\n  align-items: center;\n  color: #888;\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n  .value {\n    flex: 1;\n    font-size: 2rem;\n  }\n  .slider {\n    flex: 1;\n    -webkit-appearance: none;\n    width: 100%;\n    height: 15px;\n    border-radius: 5px;\n    background: #efefef;\n    outline: none;\n    &::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      appearance: none;\n      ","\n    }\n    &::-moz-range-thumb {\n      ","\n    }\n  }\n"]);return $=function(){return e},e}var K=function(e){return"\n  width: 25px;\n  height: 25px;\n  background: ".concat(e.color,";\n  cursor: pointer;\n  outline: 5px solid #333;\n  -webkit-transition: .2s;\n  transition: opacity .2s;\n")},Q=M.a.div($(),(function(e){return K(e)}),(function(e){return K(e)})),Z=(a.Component,function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:_}),r.a.createElement(d.a,{path:"/draw-wf",component:z}))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[257,1,2]]]);
//# sourceMappingURL=main.fbc58343.chunk.js.map